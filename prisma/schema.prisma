// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

// Menu Table
model Menu {
  id        Int    @default(autoincrement()) @id 
  menu_name String
  RoleAccess  RoleAccess[]
}

// Role Table
model Role {
  id       Int    @default(autoincrement()) @id 
  roleType String @db.VarChar(50)
  roleDesc String @db.VarChar(255)
  User     User[]
  RoleAccess  RoleAccess[]
}

// User Table
model User {
  id        Int      @default(autoincrement()) @id  
  firstName String   @db.VarChar(20)
  lastName  String   @db.VarChar(20)
  email     String   @unique
  password  String   @db.VarChar(20)
  role      Role     @relation(fields: [roleId], references: [id])
  roleId    Int  
  loggedIn  Boolean @default(false)    
}

model RoleAccess {
  id        Int      @default(autoincrement()) @id  
  role      Role     @relation(fields: [roleId], references: [id])
  roleId    Int  
  menu      Menu    @relation(fields: [menuId], references: [id])
  menuId    Int
}

// Kategori Table
model Kategori {
  id          Int     @default(autoincrement()) @id  
  name        String  
  Akun        Akun[]
  Produk      Produk[]
}

model TipeAkun {
  id          Int     @default(autoincrement()) @id  
  name        String  
  Akun        Akun[]
}

// Akun table
model Akun{
  id              Int     @default(autoincrement()) @id  
  kode_akun       String  
  tipe_akun       TipeAkun @relation(fields: [tipeId], references: [id])
  tipeId          Int
  nama_akun       String
  kategori_akun   Kategori @relation(fields: [kategoriId], references: [id])
  kategoriId      Int
  Saldo           Saldo[]
}

model Saldo{
  id              Int     @default(autoincrement()) @id  
  debit           Int
  kredit          Int
  akun            Akun    @relation(fields: [akunId], references: [id])
  akunId          Int
}

// Produk table
model Produk{
  id                Int     @default(autoincrement()) @id 
  nama              String
  image             String
  kode_sku          String
  kategori_akun     Kategori @relation(fields: [kategoriId], references: [id])
  kategoriId        Int
  
  unit              Int
  deskripsi         String
  
  harga_beli_satuan Int
  akun_pembelian1   Int
  pajak_beli        String

  harga_jual_satuan Int
  akun_pembelian2   Int
  pajak_jual        String
}

// Pajak Table
model Pajak{
  id                  Int     @default(autoincrement()) @id 
  nama                String
  presentasaAktif     Int
  akunPajakPenjualan  String
  akunPajakPembelian  String
  
}
